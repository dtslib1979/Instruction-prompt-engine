<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <meta name="format-detection" content="telephone=no"/>
  <link rel="manifest" href="manifest.webmanifest"/>
  <script type="module" src="./app-version.js?v=22"></script>
  <link rel="stylesheet" href="./assets/styles.css?v=22">
  <title>Instruction Prompt PWA</title>
</head>
<body>
<header class="app-header">
  <div class="inner">
    <div class="brand">Instruction Prompt PWA</div>
    <div class="toolbar">
      <button id="btnSyncAll" class="btn ghost">Sync</button>
      <button id="btnInstall" class="btn solid">Install</button>
    </div>
  </div>
</header>

<!-- Update banner mounts here when SW says NEW_VERSION -->
<div id="updateMount"></div>

<section class="hero">
  <div class="hero-card">
    <span class="kicker">Prompt book · PWA</span>
    <h2>Copy-first mobile instruction book</h2>
    <p>Open a category → scan titles → copy instantly. Pin up to 10 favorites.</p>
  </div>
</section>

<main class="container">
  <div class="columns">
    <!-- Categories (accordion) -->
    <aside class="panel">
      <h3>Categories</h3>
      <div id="catAccordion" class="acc"></div>
    </aside>

    <!-- Prompt cards -->
    <section class="panel">
      <div id="promptGrid" class="grid"></div>
    </section>

    <!-- Favorites - only visible on desktop -->
    <aside class="panel favorites-panel">
      <h3>Favorites</h3>
      <ul id="favList" class="fav-list"></ul>
    </aside>
  </div>
</main>

<footer class="site-footer">
  <small>© dtslib. All rights reserved. · <a href="./imprint.html" rel="nofollow">imprint</a> · <span id="app-version">v22</span></small>
</footer>

<script type="module" src="./app.js?v=22"></script>
<script>
  if (!location.search.includes('v=')) {
    const v = 'v22';
    const url = new URL(location.href);
    url.searchParams.set('v', v);
    history.replaceState(null, '', url.toString());
  }
</script>
</body>
</html>